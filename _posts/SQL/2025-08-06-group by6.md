---
layout: post
title:  "[SQL] LV.3 즐겨찾기가 가장 많은 식당 정보 출력하기(GROUP BY)" 
subtitle: programmers
tags: [MySQL]
categories: SQL
---
<img width="100%" alt="Image" src="https://github.com/user-attachments/assets/576a3402-5d36-4141-8911-03a2e9c1a015" />

# 문제
<https://school.programmers.co.kr/learn/courses/30/lessons/131123>

## 테이블 구조

1. `REST_INFO`테이블
    - `REST_ID`: 식당 ID
    - `REST_NAME`: 식당 이름
    - `FOOD_TYPE`: 음식 종류
    - `VIEWS`: 조회수
    - `FAVORITES`: 즐겨찾기수
    - `PARKING_LOT`: 주차장 유무
    - `ADDRESS`: 주소
    - `TEL`: 전화번호

## 답안


```python
SELECT FOOD_TYPE, REST_ID, REST_NAME, FAVORITES
FROM REST_INFO
WHERE (FOOD_TYPE, FAVORITES) IN (
    SELECT FOOD_TYPE, MAX(FAVORITES)
    FROM REST_INFO
    GROUP BY FOOD_TYPE
)
ORDER BY FOOD_TYPE DESC
```

## 쿼리 설명

### 1. 서브쿼리


```python
SELECT FOOD_TYPE, MAX(FAVORITES)
    FROM REST_INFO
    GROUP BY FOOD_TYPE
```

- 음식 종류별로 `FAVORITES`가 가장 큰 값을 구한다.

### 2. WHERE 절


```python
WHERE (FOOD_TYPE, FAVORITES) IN (...)
```

- 서브쿼리에서 구한 음식 종류별 최고 즐겨찾기 수와 일치하는 레스토랑만 골라낸다.
