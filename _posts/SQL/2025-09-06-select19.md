---
layout: post
title:  "[SQL] LV.4 서울에 위치한 식당 목록 출력하기(SELECT)" 
subtitle: programmers
tags: [MYSQL]
categories: SQL
---
<img width="100%" alt="Image" src="https://github.com/user-attachments/assets/576a3402-5d36-4141-8911-03a2e9c1a015" />

# 문제
<https://school.programmers.co.kr/learn/courses/30/lessons/131118>

## 테이블 구조

1. `REST_INFO`테이블
    - `REST_ID`: 식당 ID
    - `REST_NAME`: 식당 이름
    - `FOOD_TYPE`: 음식 종류
    - `VIEWS`: 조회수
    - `FAVORITES`: 즐겨찾기수
    - `PARKING_LOT`: 주차장 유무
    - `ADDRESS`: 주소
    - `TEL`: 전화번호
2. `REST_REVIEW`테이블
    - `REVIEW_ID`: 리뷰 ID
    - `REST_ID`: 식당 ID
    - `MEMBER_ID`: 회원 ID
    - `REVIEW_SCORE`: 점수
    - `REVIEW_TEXT`: 리뷰 텍스트
    - `REVIEW_DATE`: 리뷰 작성일

## 답안


```sql
SELECT I.REST_ID, I.REST_NAME, I.FOOD_TYPE, I.FAVORITES, I.ADDRESS, ROUND(AVG(R.REVIEW_SCORE), 2) AS SCORE
FROM REST_INFO I
INNER JOIN REST_REVIEW R ON I.REST_ID = R.REST_ID
WHERE I.ADDRESS LIKE '서울%'
GROUP BY I.REST_ID, I.REST_NAME, I.FOOD_TYPE, I.FAVORITES, I.ADDRESS
ORDER BY SCORE DESC, FAVORITES DESC;
```

## 쿼리 설명


```sql
FROM REST_INFO I
INNER JOIN REST_REVIEW R ON I.REST_ID = R.REST_ID
```

- `REST_INFO` 테이블(`I`)과 `REST_REVIEW` 테이블(`R`)을 `REST_ID` 기준으로 내부 조인
- 리뷰가 존재하는 식당만 추출


```sql
WHERE I.ADDRESS LIKE '서울%'
```

- 식당 주소가 '서울'로 시작하는 행만 조회


```sql
GROUP BY I.REST_ID, I.REST_NAME, I.FOOD_TYPE, I.FAVORITES, I.ADDRESS
```

- 식당별로 그룹핑하여 리뷰 평균 계산 가능하게 함


```sql

```
