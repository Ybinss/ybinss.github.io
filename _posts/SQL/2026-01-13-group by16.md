---
layout: post
title:  "[SQL] LV.2 입양 시각 구하기(1)(GROUP BY)" 
subtitle: programmers
tags: [MySQL]
categories: SQL
---
<img width="100%" alt="Image" src="https://github.com/user-attachments/assets/576a3402-5d36-4141-8911-03a2e9c1a015" />

# 문제
<https://school.programmers.co.kr/learn/courses/30/lessons/59412?language=oracle>

## 테이블 구조

1. `ANIMAL_OUTS`테이블
    - `ANIMAL_ID`: 동물의 ID
    - `ANIMAL_TYPE`: 생물 종
    - `DATETIME`: 입양일
    - `NAME`: 이름
    - `SEX_UPON_OUTCOME`: 성별 및 중성화 여부

## 답안


```sql
SELECT TO_NUMBER(TO_CHAR(DATETIME, 'HH24')) AS HOUR, COUNT(*) AS COUNT
FROM ANIMAL_OUTS
WHERE TO_CHAR(DATETIME, 'HH24') BETWEEN '09' AND '19'
GROUP BY TO_CHAR(DATETIME, 'HH24')
ORDER BY HOUR;
```

## 쿼리 설명


```sql
WHERE TO_CHAR(DATETIME, 'HH24') BETWEEN '09' AND '19'
```

- `TO_CHAR(DATETIME, 'HH24')`:
    + `DATETIME` 컬럼에서 시간(Hour) 부분만 추출한다.
    + `'HH24'`는 24시간 형식이므로 `00`부터 `23`까지의 문자열이 나온다.
    + 예: 2022-07-01 14:30:00 -> `'14'` 


```sql
SELECT TO_NUMBER(TO_CHAR(DATETIME, 'HH24')) AS HOUR, COUNT(*) AS COUNT
```

- `TO_NUMBER(TO_CHAR(DATETIME, 'HH24')) AS HOUR`:
    + `TO_CHAR`로 뽑은 시간은 문자열이기 때문에 정렬 시 `'10' < '2'`처럼 비정상 동작할 수 있다.
    + 따라서 `TO_NUMBER`로 변환해서 숫자형 정렬이 되도록 한다. 
